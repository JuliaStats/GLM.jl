<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Manual · GLM</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>GLM</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li class="current"><a class="toctext" href>Manual</a><ul class="internal"><li><a class="toctext" href="#Installation-1">Installation</a></li><li><a class="toctext" href="#Fitting-GLM-models-1">Fitting GLM models</a></li><li><a class="toctext" href="#Categorical-variables-1">Categorical variables</a></li><li><a class="toctext" href="#Methods-applied-to-fitted-models-1">Methods applied to fitted models</a></li><li><a class="toctext" href="#Separation-of-response-object-and-predictor-object-1">Separation of response object and predictor object</a></li></ul></li><li><a class="toctext" href="../examples/">Examples</a></li><li><a class="toctext" href="../api/">API</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Manual</a></li></ul><a class="edit-page" href="https://github.com/JuliaStats/GLM.jl/blob/master/docs/src/manual.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Manual</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Manual-1" href="#Manual-1">Manual</a></h1><h2><a class="nav-anchor" id="Installation-1" href="#Installation-1">Installation</a></h2><pre><code class="language-julia">Pkg.add(&quot;GLM&quot;)</code></pre><p>will install this package and its dependencies, which includes the <a href="https://github.com/JuliaStats/Distributions.jl">Distributions package</a>.</p><p>The <a href="https://github.com/johnmyleswhite/RDatasets.jl">RDatasets package</a> is useful for fitting models on standard R datasets to compare the results with those from R.</p><h2><a class="nav-anchor" id="Fitting-GLM-models-1" href="#Fitting-GLM-models-1">Fitting GLM models</a></h2><p>To fit a Generalized Linear Model (GLM), use the function, <code>glm(formula, data, family, link)</code>, where,</p><ul><li><code>formula</code>: uses column symbols from the DataFrame data, for example, if <code>names(data)=[:Y,:X1,:X2]</code>, then a valid formula is <code>@formula(Y ~ X1 + X2)</code></li><li><code>data</code>: a DataFrame which may contain NA values, any rows with NA values are ignored</li><li><code>family</code>: chosen from <code>Bernoulli()</code>, <code>Binomial()</code>, <code>Gamma()</code>, <code>Normal()</code>, <code>Poisson()</code>, or <code>NegativeBinomial(θ)</code></li><li><code>link</code>: chosen from the list below, for example, <code>LogitLink()</code> is a valid link for the <code>Binomial()</code> family</li></ul><p>Typical distributions for use with <code>glm</code> and their canonical link functions are</p><pre><code class="language-none">       Bernoulli (LogitLink)
        Binomial (LogitLink)
           Gamma (InverseLink)
 InverseGaussian (InverseSquareLink)
NegativeBinomial (LogLink)
          Normal (IdentityLink)
         Poisson (LogLink)</code></pre><p>Currently the available Link types are</p><pre><code class="language-none">CauchitLink
CloglogLink
IdentityLink
InverseLink
InverseSquareLink
LogitLink
LogLink
NegativeBinomialLink
ProbitLink
SqrtLink</code></pre><p>The <code>NegativeBinomial</code> distribution belongs to the exponential family only if θ (the shape parameter) is fixed, thus θ has to be provided if we use <code>glm</code> with <code>NegativeBinomial</code> family. If one would like to also estimate θ, then <code>negbin(formula, data, link)</code> should be used instead.</p><p>An intercept is included in any GLM by default.</p><h2><a class="nav-anchor" id="Categorical-variables-1" href="#Categorical-variables-1">Categorical variables</a></h2><p>Categorical variables will be dummy coded by default if they are non-numeric or if they are <a href="https://juliadata.github.io/CategoricalArrays.jl/stable/"><code>CategoricalVector</code>s</a> within a <a href="https://juliadata.github.io/Tables.jl/stable/">Tables.jl</a> table (<code>DataFrame</code>, JuliaDB table, named tuple of vectors, etc). Alternatively, you can pass an explicit  <a href="https://juliastats.github.io/StatsModels.jl/stable/contrasts/">contrasts</a> argument if you would like a different contrast coding system or if you are not using DataFrames.</p><p>The response (dependent) variable may not be categorical.</p><p>Using a <code>CategoricalVector</code> constructed with <code>categorical</code> or <code>categorical!</code>:</p><pre><code class="language-julia-repl">julia&gt; using DataFrames, GLM, Random

julia&gt; Random.seed!(1); # Ensure example can be reproduced

julia&gt; data = DataFrame(y = rand(100), x = categorical(repeat([1, 2, 3, 4], 25)));

julia&gt; lm(@formula(y ~ x), data)
StatsModels.TableRegressionModel{LinearModel{GLM.LmResp{Array{Float64,1}},GLM.DensePredChol{Float64,LinearAlgebra.Cholesky{Float64,Array{Float64,2}}}},Array{Float64,2}}

y ~ 1 + x

Coefficients:
─────────────────────────────────────────────────────────────────────────────
              Estimate  Std. Error   t value  Pr(&gt;|t|)   Lower 95%  Upper 95%
─────────────────────────────────────────────────────────────────────────────
(Intercept)  0.41335     0.0548456  7.53662     &lt;1e-10   0.304483    0.522218
x: 2         0.172338    0.0775634  2.2219      0.0286   0.0183756   0.3263  
x: 3         0.0422104   0.0775634  0.544205    0.5876  -0.111752    0.196172
x: 4         0.0793591   0.0775634  1.02315     0.3088  -0.074603    0.233321
─────────────────────────────────────────────────────────────────────────────</code></pre><p>Using <a href="https://juliastats.github.io/StatsModels.jl/stable/contrasts/"><code>contrasts</code></a>:</p><pre><code class="language-julia-repl">julia&gt; data = DataFrame(y = rand(100), x = repeat([1, 2, 3, 4], 25));

julia&gt; lm(@formula(y ~ x), data, contrasts = Dict(:x =&gt; DummyCoding()))
StatsModels.TableRegressionModel{LinearModel{GLM.LmResp{Array{Float64,1}},GLM.DensePredChol{Float64,LinearAlgebra.Cholesky{Float64,Array{Float64,2}}}},Array{Float64,2}}

y ~ 1 + x

Coefficients:
────────────────────────────────────────────────────────────────────────────────
               Estimate  Std. Error     t value  Pr(&gt;|t|)   Lower 95%  Upper 95%
────────────────────────────────────────────────────────────────────────────────
(Intercept)   0.464446    0.0582412   7.97453      &lt;1e-11   0.348838    0.580054
x: 2         -0.0057872   0.0823655  -0.0702624    0.9441  -0.169281    0.157707
x: 3          0.0923976   0.0823655   1.1218       0.2647  -0.0710966   0.255892
x: 4          0.115145    0.0823655   1.39797      0.1653  -0.0483494   0.278639
────────────────────────────────────────────────────────────────────────────────</code></pre><h2><a class="nav-anchor" id="Methods-applied-to-fitted-models-1" href="#Methods-applied-to-fitted-models-1">Methods applied to fitted models</a></h2><p>Many of the methods provided by this package have names similar to those in <a href="http://www.r-project.org">R</a>.</p><ul><li><code>coef</code>: extract the estimates of the coefficients in the model</li><li><code>deviance</code>: measure of the model fit, weighted residual sum of squares for lm&#39;s</li><li><code>dof_residual</code>: degrees of freedom for residuals, when meaningful</li><li><code>glm</code>: fit a generalized linear model (an alias for <code>fit(GeneralizedLinearModel, ...)</code>)</li><li><code>lm</code>: fit a linear model (an alias for <code>fit(LinearModel, ...)</code>)</li><li><code>r2</code>: R² of a linear model or pseudo-R² of a generalized linear model</li><li><code>stderror</code>: standard errors of the coefficients</li><li><code>vcov</code>: estimated variance-covariance matrix of the coefficient estimates</li><li><code>predict</code> : obtain predicted values of the dependent variable from the fitted model</li></ul><p>Note that the canonical link for negative binomial regression is <code>NegativeBinomialLink</code>, but in practice one typically uses <code>LogLink</code>.</p><h2><a class="nav-anchor" id="Separation-of-response-object-and-predictor-object-1" href="#Separation-of-response-object-and-predictor-object-1">Separation of response object and predictor object</a></h2><p>The general approach in this code is to separate functionality related to the response from that related to the linear predictor.  This allows for greater generality by mixing and matching different subtypes of the abstract type <code>LinPred</code> and the abstract type <code>ModResp</code>.</p><p>A <code>LinPred</code> type incorporates the parameter vector and the model matrix.  The parameter vector is a dense numeric vector but the model matrix can be dense or sparse.  A <code>LinPred</code> type must incorporate some form of a decomposition of the weighted model matrix that allows for the solution of a system <code>X&#39;W * X * delta=X&#39;wres</code> where <code>W</code> is a diagonal matrix of &quot;X weights&quot;, provided as a vector of the square roots of the diagonal elements, and <code>wres</code> is a weighted residual vector.</p><p>Currently there are two dense predictor types, <code>DensePredQR</code> and <code>DensePredChol</code>, and the usual caveats apply.  The Cholesky version is faster but somewhat less accurate than that QR version. The skeleton of a distributed predictor type is in the code but not yet fully fleshed out.  Because Julia by default uses OpenBLAS, which is already multi-threaded on multicore machines, there may not be much advantage in using distributed predictor types.</p><p>A <code>ModResp</code> type must provide methods for the <code>wtres</code> and <code>sqrtxwts</code> generics.  Their values are the arguments to the <code>updatebeta</code> methods of the <code>LinPred</code> types.  The <code>Float64</code> value returned by <code>updatedelta</code> is the value of the convergence criterion.</p><p>Similarly, <code>LinPred</code> types must provide a method for the <code>linpred</code> generic.  In general <code>linpred</code> takes an instance of a <code>LinPred</code> type and a step factor.  Methods that take only an instance of a <code>LinPred</code> type use a default step factor of 1.  The value of <code>linpred</code> is the argument to the <code>updatemu</code> method for <code>ModResp</code> types.  The <code>updatemu</code> method returns the updated deviance.</p><footer><hr/><a class="previous" href="../"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="../examples/"><span class="direction">Next</span><span class="title">Examples</span></a></footer></article></body></html>
